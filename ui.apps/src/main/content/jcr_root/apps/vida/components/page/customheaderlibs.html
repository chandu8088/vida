<!--/*
   Copyright 2017 Adobe Systems Incorporated

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at
   
       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
   */-->
<sly data-sly-use.model="com.heromotocorp.vida.core.models.PageModel">
  <link
    rel="preload"
    href="/etc.clientlibs/vida/clientlibs/clientlib-site/resources/fonts/PPNeueMontreal/PPNeueMontreal-Regular.woff2"
    as="font"
    type="font/woff2"
  />
  <link
    rel="preload"
    href="/etc.clientlibs/vida/clientlibs/clientlib-site/resources/fonts/PPNeueMontreal/PPNeueMontreal-Medium.woff2"
    as="font"
    type="font/woff"
  />
  <link
    rel="preload"
    href="/etc.clientlibs/vida/clientlibs/clientlib-site/resources/fonts/PPNeueMontreal/PPNeueMontreal-Bold.woff2"
    as="font"
    type="font/woff"
  />
  <link
    rel="preload"
    href="/etc.clientlibs/vida/clientlibs/clientlib-site/resources/fonts/icomoon/fonts/icomoon.woff?j2kx0v"
    as="font"
    type="font/woff"
  />

  <meta
    name="google-site-verification"
    content="Sac5AWfulnAae_kvzIAmCE7ql-Rq41LJls3bBmFt7-Y"
  />

  <!--<link rel="preload" href="${model.storeDetailsUrl @ context='uri'}" as="fetch">
  <link rel="preload" href="${model.productListUrl @ context='uri'}" as="fetch">
  <link rel="preload" href="${model.productPriceUrl @ context='uri'}" as="fetch">
  <link rel="preload" href="${model.productBranchesUrl @ context='uri'}" as="fetch">-->
</sly>
<link rel="shortcut icon" href="/content/dam/vida/logo/favicon.ico" />

<sly data-sly-use.clientlib="/libs/granite/sightly/templates/clientlib.html">
  <sly data-sly-call="${clientlib.css @ categories='vida.base'}" />
</sly>
<sly data-sly-use.model="com.heromotocorp.vida.core.models.DataLayerPageModel">
  <meta property="pageCategory" content="${model.pageCategory}" />
  <meta
    property="pageName"
    content="${model.analyticsPageName ? model.analyticsPageName : currentPage.title}"
  />
  <meta
    property="twitter:title"
    content="${model.socialShareTitle ? model.socialShareTitle : currentPage.title}"
  />
  <sly data-sly-test = "${'$cityName' in properties.pageTitle}">
    <sly data-sly-use.seomodel="com.heromotocorp.vida.core.models.CustomMetaDataModel">
    <meta
      property="twitter:description"
      content="${model.socialShareDesc ? model.socialShareDesc : seomodel.modifiedDescription}"
    />
    </sly>
  </sly>
  <sly data-sly-test = "${!('$cityName' in properties.pageTitle)}">
    <meta
      property="twitter:description"
      content="${model.socialShareDesc ? model.socialShareDesc : currentPage.description}"
    />
  </sly>
    
  <meta property="twitter:image" content="${model.socialShareImage}" />
  <meta property="keywords" content="${model.keywords}" />
  <meta
    property="og:title"
    content="${model.socialShareTitle ? model.socialShareTitle : currentPage.title}"
  />
  <sly data-sly-test = "${'$cityName' in properties.pageTitle}">
    <sly data-sly-use.seomodel="com.heromotocorp.vida.core.models.CustomMetaDataModel"> 
      <meta
        property="og:description"
        content="${model.socialShareDesc ? model.socialShareDesc : seomodel.modifiedDescription}"
      />
   </sly>
  </sly>
  <sly data-sly-test = "${!('$cityName' in properties.pageTitle)}">
    <meta
        property="og:description"
        content="${model.socialShareDesc ? model.socialShareDesc : currentPage.description}"
      />
  </sly>
  <meta property="og:image" content="${model.socialShareImage}" />
  <meta property="country" content="${currentPage.language.displayCountry}" />
  <meta property="language" content="${currentPage.language}" />
  <meta property="isErrorPage" content="${model.isErrorPage}" />
  <meta property="errorCode" content="${model.errorCode}" />
  <meta property="errorDescription" content="${model.errorDescription}" />
  <meta
    name="facebook-domain-verification"
    content="${model.fbdomaincontent}"
  />
</sly>
<meta
  name="viewport"
  content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
/>
<sly data-sly-use.model="com.heromotocorp.vida.core.models.PageModel">
  <script>
      window.appConfig = Object.assign(window.appConfig || {}, {
        "analyticsConfig": {
          "isAnalyticsEnabled": true,
        },
        "globalConfig": {
          "env": ["${model.environment @ context='uri'}", "${model.instance @ context='uri'}"],
          "magentoAPIUrl": "${model.magentoGrapghqlUrl @ context='uri'}",
          "tokenExpirtyInDays": 10,
          "imgPath": "${model.productImageFolderPath @ context='uri'}",
          "resourcePath": "${model.resourcePath @ context='uri'}",
          "freedoBookingLimit": ${ model.freedoBookingLimit @context='scriptString'},
    "isEncryptionSupportRequired": ${ model.encryptionSupportRequired @context='scriptString' },
    "currency": "INR",
    "mapLoaderTimer":"${model.loaderTimer @ context='scriptString'}",
    "currencyCountry": "en-IN",
          "currencySymbol": "â‚¹",
          "phNumberStartsWith": ["9", "8", "7", "6"],
          "phNumberLength": 10,
          "authorMode": "${wcmmode.edit @context='scriptString'}",
          "defaultCountry": "${model.country @ context='scriptString'}",
          "countryList": [
            {
              label: "Select Country",
              value: ""
            },
            {
              label: "${model.country @ context='scriptString'}",
              value: "${model.country @ context='scriptString'}",
            }
          ],
          "defaultCountryCode": "${model.defaultCountryCode @ context='scriptString'}",
          "isShortTermTestRideEnabled": ${ model.isShortTermTestRideEnabled @context='scriptString' },
          "isLongTermTestRideEnabled": ${ model.isLongTermTestRideEnabled @context='scriptString' },
          "isMyScooterEnabled": ${ model.isScooterEnabled @context='scriptString' },
          "isRecentEnabled": ${ model.isRecentEnabled @context = 'scriptString' },
          "mmiIcons":"${model.mmiIcons @ context='scriptString'}",
          "pageTitle": "${currentPage.title @ context='scriptString'}",
          "apiUrl": {
            "geoDataUrl": "${model.geoDataUrl @ context='uri'}",
            "serviceableCitiesUrl": "${model.serviceableCitiesUrl @ context='uri'}",
            "availableTestRideCities": "${model.availableTestRideCities @ context='uri'}",
            "availableLTTRStateCities": "${model.lttrStateCities @ context='uri'}",
            "availableDealerCities": "${model.availableDealerCities @ context='uri'}",
            "serviceableBranchesUrl": "${model.serviceableBranchesUrl @ context='uri'}",
            "serviceablePincodesUrl": "${model.pincodeCityUrl @ context='uri'}",
            "shortTermServiceableCitiesUrl": "${model.shortTermServiceableCitiesUrl @ context='uri'}",
            "longTermServiceableCitiesUrl": "${model.longTermServiceableCitiesUrl @ context='uri'}",
            "productListUrl": "${model.productListUrl @ context='uri'}",
            "productBranchesUrl": "${model.productBranchesUrl @ context='uri'}",
            "productPriceUrl": "${model.productPriceUrl @ context='uri'}",
            "googleMapUrl": "${model.googleMapUrl @ context='uri'}",
            "getInTouchUrl": "${model.getInTouchUrl @ context='uri'}",
            "storeDetailsUrl": "${model.storeDetailsUrl @ context='uri'}",
            "contactUsUrl": "${model.contactUsUrl @ context='uri'}",
            "paymentInfoUrl": "${model.productPriceUrl @ context='uri'}",
            "exchangeVehicleMasterUrl": "${model.exchangeVehicleMasterUrl @ context='uri'}",
            "lttrVehicleMasterUrl": "${model.lttrVehicleMasterUrl @ context='uri'}",
            "lttrCityMasterUrl": "${model.lttrCityMasterUrl @ context='uri'}",
            "lttrRelationMasterUrl": "${model.lttrRelationMasterUrl @ context='uri'}",
            "lttrPackageMasterUrl": "${model.lttrPackageMasterUrl @ context='uri'}",
            "pickupLocationUrl": "${model.pickupLocationUrl @ context='uri'}",
            "addressTypesUrl" : "${model.addressTypesUrl @ context='uri'}",
            "leadCreationUrl": "${model.leadCreationUrl @ context='uri'}",
            "currentPagePath": "${currentPage.path @ context='uri'}",
            "eshopRedirectionAPIUrl": "${model.eshopRedirectionServletUrl @ context='uri'}"
          },
          "pageList": {
            "loginUrl": "${model.loginPageUrl @ context='uri'}",
            "profileUrl": "${model.profilePageUrl @ context='uri'}",
            "testDriveUrl": "${model.testDriveUrl @ context='uri'}",
            "testDriveSelectorUrl": "${model.testDriveSelectorUrl @ context='uri'}",
        		"testDriveLoginUrl": "${model.testDriveLoginUrl @ context='uri', extension='html'}",
            "longTermTestDriveUrl" : "${model.longTermTestDriveUrl @ context='uri'}",
            "shortTermTestDriveUrl" : "${model.shortTermTestDriveUrl @ context='uri'}",
            "purchaseConfigUrl": "${model.purchaseConfigUrl @ context='uri'}",
            "preBookingUrl": "${model.preBookingUrl @ context='uri'}",
            "quickReserveUrl": "${model.quickReserveUrl @ context='uri'}",
            "preBookingStatusUrl": "${model.preBookingStatusUrl @ context='uri'}",
            "faqUrl": "${model.faqUrl @ context='uri'}",
            "billingShippingUrl": "${model.billingShippingUrl @ context='uri'}",
            "billingPricingUrl": "${model.billingPricingUrl @ context='uri'}",
            "billingPricingNewUrl": "${model.purchaseSummaryUrl @ context='uri'}",
            "bookingStatusUrl": "${model.bookingStatusUrl @ context='uri'}",
            "nomineeDetailsUrl": "${model.nomineeDetailsUrl @ context='uri'}",
            "uploadDocumentsUrl": "${model.uploadDocumentsUrl @ context='uri'}",
            "lttrTestDriveUploadDocumentsUrl" : "${model.lttrTestDriveUploadDocumentsUrl @ context='uri'}",
            "lttrTestDriveSummaryUrl" : "${model.lttrTestDriveSummaryUrl @ context='uri'}",
            "longTermTestDriveNewUrl" : "${model.lttrAcknowledgeUrl @ context='uri'}",
            "lttrTestDriveStatusUrl" : "${model.lttrTestDriveStatusUrl @ context='uri'}",
            "advantageUrl": "${model.advantagePageUrl @ context='uri'}",
            "aadharValidationUrl": "${model.aadharValidationUrl @ context='uri'}",
            "aadharValidationStatusUrl": "${model.aadharValidationStatusUrl @ context='uri'}",
            "deliveryTrackerUrl": "${model.deliveryTrackerUrl @ context='uri'}",
            "configurationUrl": "${model.configurationUrl @ context='uri'}",
            "aadharVerificationUrl": "${model.aadharVerificationUrl @ context='uri'}",
            "emiCalculatorUrl": "${model.emiCalculatorUrl @ context='uri'}",
            "dealerLocatorUrl": "${model.dealerLocatorUrl @ context='uri'}",
            "batteryUrl": "${model.batteryUrl @ context='uri'}",
            "ordersUrl": "${model.ordersPageUrl @ context='uri'}",
            "vidaTestRideNewUrl": "${model.newTestRidePageUrl @ context='uri'}"
          }
        },
      "pageConfig": {
        "showLeavePageNotification" : "${model.pageNotification @ context='scriptString'}"
      }
      });
  </script>
  ${model.seoSchema @ context='unsafe'}
  <sly
    data-sly-test.page="${currentPage.template.name == 'journey-template' || model.isLoginProtected}"
  >
    <sly data-sly-test="${!wcmmode.edit}">
      <script>
        const sessionCookieExist = document.cookie.match(
          /^(.*;)?\s*SESSION_TOKEN\s*=\s*[^;]+(.*)?$/
        );
        if (!sessionCookieExist) {
          window.location.href =
            "${model.loginPageUrl @ context='uri'}" +
            "?redirectURL=" +
            window.location.href;
        }
      </script>
    </sly>
  </sly>
  <sly data-sly-test.page="${model.isLoginPage}">
    <sly data-sly-test="${!wcmmode.edit}">
      <script>
        const sessionCookieExist2 = document.cookie.match(
          /^(.*;)?\s*SESSION_TOKEN\s*=\s*[^;]+(.*)?$/
        );
        if (sessionCookieExist2) {
          window.location.href = "${model.profilePageUrl @ context='uri'}";
        }
      </script>
    </sly>
  </sly>
</sly>
<script>
  function getCookie(cname) {
    const name = cname + "=";
    const decodedCookie = decodeURIComponent(document.cookie);
    const ca = decodedCookie.split(";");
    for (let i = 0; i < ca.length; i++) {
      let c = ca[i];
      while (c.charAt(0) == " ") {
        c = c.substring(1);
      }
      if (c.indexOf(name) == 0) {
        return c.substring(name.length, c.length);
      }
    }
    return "";
  }
</script>

<script>
  window.appConfig = Object.assign(window.appConfig || {}, {
    scrollTrackingBuckets: [50, 75, 100],
  });
</script>

<script type="text/javascript">
  (function (c, l, a, r, i, t, y) {
    c[a] =
      c[a] ||
      function () {
        (c[a].q = c[a].q || []).push(arguments);
      };
    t = l.createElement(r);
    t.async = 1;
    t.src = "https://www.clarity.ms/tag/" + i;
    y = l.getElementsByTagName(r)[0];
    y.parentNode.insertBefore(t, y);
  })(window, document, "clarity", "script", "gc2yngcme1");
</script>

<script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','${ model.googleTag @context='unsafe'}');
</script>
